<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!--
 * Copyright (c) 2009-2014 NVIDIA CORPORATION.  All rights reserved.
 *
 * NVIDIA Corporation and its licensors retain all intellectual property
 * and proprietary rights in and to this software, related documentation
 * and any modifications thereto.  Any use, reproduction, disclosure or
 * distribution of this software and related documentation without an express
 * license agreement from NVIDIA Corporation is strictly prohibited.
-->
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>Jetson Sensor Processing Engine (SPE) Developer Guide: GPIO Application (app/gpio-app.c)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="Nvidia.ico" type="image/x-icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="reverb-search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
<link href="nv.css" rel="stylesheet" type="text/css" />
<style>
 body {
 background-position: 350px 150px;
 background-image: url(watermark.png);
 background-repeat: no-repeat;
 background-attachment: fixed;
 }
 </style>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table width="99%" border="0" cellspacing="1" cellpadding="1">
  <tbody>
    <tr valign="middle">
      <td rowspan="2" height="44" width="19%">
        <img src="./NVLogo_2D_H.jpg" width="204" height="44"></td>
      <td width="81%" height="44">
        <h2 style="text-align:right">Jetson Sensor Processing Engine (SPE) Developer Guide</h2>
        <h4 style="text-align:right">
        r32.2 Release</h4>
    </td>
  </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_rt-aux-cpu-demo_doc_gpio.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">GPIO Application (app/gpio-app.c) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md13">Jetson TX2</a></li>
<li class="level1"><a href="#autotoc_md14">Jetson AGX</a></li>
</ul>
</div>
<div class="textblock"><p>GPIO application demonstrates how to access/manipulate Always On (AON) GPIOs from the SPE/AON processor. Make sure that the kernel/bootloader is not accessing these GPIOs (Usually, this can be done by modifying the device tree file) and no external module is connected to the Jetson expansion header. Compilation of this demo app can be controlled by <code>ENABLE_GPIO_APP</code> flag in the soc/*/ <code>target_specific.mk</code> file.</p>
<h1><a class="anchor" id="autotoc_md13"></a>
Jetson TX2</h1>
<p>In order to access a AON GPIO from the Cortex-R5 SPE/AON; the GPIO SCR and Pinmux settings need to be updated to enable access to it as described in below steps.</p>
<ol type="1">
<li>Update SCR values as below in the file mobile_scr.cfg: <pre class="fragment"> scr.1549.2 = 0x1C001010; # GPIO_Z_SCR_00_0
 scr.1550.2 = 0x1C001010; # GPIO_Z_SCR_01_0
</pre></li>
<li>Program the PADCTL register for the gpio pins as below in the file <code>tegra186-mb1-bct-pinmux-quill-p3310-1000-c03.cfg</code>: <pre class="fragment">  pinmux.0x0c303008 = 0x00000004; # can1_dout_pz0
  pinmux.0x0c303010 = 0x00000058; # can1_din_pz1
</pre></li>
<li>Flash the entire board to ensure that the SCR and pinmux settings are flashed on the board.</li>
<li>Short GPIO pins of the 30 pin header J26 pin 17 and pin 15, this should print out "GPIO input irq triggered" message since pin 17 is configured as OUT which drives the pin 15 which is configured as INPUT and also has interrupt enabled.</li>
</ol>
<h1><a class="anchor" id="autotoc_md14"></a>
Jetson AGX</h1>
<p>In order to access a AON GPIO from the Cortex-R5 SPE/AON for Jetson AGX; the GPIO SCR, GPIO interrupt map and pinmux settings need to be updated as described in below steps.</p>
<ol type="1">
<li>Update SCR values as below in the file <code>tegra194-mb1-bct-scr-cbb-mini.cfg</code>: <pre class="fragment">  scr.41.6 = 0x18001010; # GPIO_BB_SCR_00_0
  scr.42.6 = 0x18001010; # GPIO_BB_SCR_01_0
</pre></li>
<li>Update gpio interrupt mapping as below in <code>tegra194-mb1-bct-gpioint-p2888-0000-p2822-0000.cfg</code>: <pre class="fragment">  gpio-intmap.port.BB.pin.0 = 2; # GPIO BB0 to INT2
  gpio-intmap.port.BB.pin.1 = 2; # GPIO BB1 to INT2
</pre></li>
<li>Update default pinmux configuration as below in the file <code>tegra19x-mb1-pinmux-p2888-0000-a04-p2822-0000-b01.cfg</code>: <pre class="fragment">  pinmux.0x0c2f1800 = 0x00000003; # CONFIG BB0 output
  pinmux.0x0c303040 = 0x0000c004; # can1_stb_pbb0
  pinmux.0x0c303048 = 0x0000c044; # can1_en_pbb1
</pre></li>
<li>Compile device tree and flash the entire board to ensure that the SCR, gpio interrupt mapping and pinmux settings are flashed on the board.</li>
<li>Short GPIO pins of the 40 pin header J30 pin 16 and pin 32, this should print out "GPIO input irq triggered" message since pin 16 is configured as OUT which drives the pin 32 which is configured as INPUT and also has interrupt enabled. </li>
</ol>
</div></div><!-- contents -->
</div><!-- doc-content -->

  <div id="nav-path" class="navpath">
    <ul>
      <li class="footer">
        Advance Information | Subject to Change |
        Tue Jul 2 2019 13:38:41 |
        09482-R32
      </li>
     </ul>
  </div>
</body>
</html>
